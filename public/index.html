<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Jogo de dedu√ß√£o social Cidade Dorme - Jogue em tempo real com seus amigos">
  <meta name="theme-color" content="#0a0e17">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Cidade Dorme">
  <title>Cidade Dorme - Jogo de Mist√©rio</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Tela de Entrada -->
  <div id="home-screen" class="screen active">
    <div class="moon-bg"></div>
    <div class="container">
      <div class="logo-container">
        <div class="moon-icon">üåô</div>
        <h1 class="game-title">Cidade<br>Dorme</h1>
        <p class="game-subtitle">Um jogo de mist√©rio e dedu√ß√£o</p>
      </div>
      
      <div class="card">
        <input type="text" id="player-name-input" placeholder="Seu nome" maxlength="20" autocomplete="off">
        
        <div class="button-group">
          <button id="create-room-btn" class="btn btn-primary">
            <span class="btn-icon">+</span>
            <span class="btn-text">Criar Sala</span>
          </button>
          
          <div class="or-divider">
            <span>ou</span>
          </div>
          
          <div class="join-room-group">
            <input type="text" id="room-code-input" placeholder="C√≥digo da sala" maxlength="6" autocomplete="off">
            <button id="join-room-btn" class="btn btn-secondary">Entrar</button>
          </div>
        </div>
      </div>
      
      <div class="footer-info">
        <p>4-12 jogadores ‚Ä¢ Tempo real</p>
      </div>
    </div>
  </div>

  <!-- Tela de Lobby -->
  <div id="lobby-screen" class="screen">
    <div class="container">
      <div class="header">
        <div class="room-info">
          <h2>Sala <span id="room-code-display" class="room-code"></span></h2>
          <button id="copy-code-btn" class="btn-icon-only">üìã</button>
        </div>
        <button id="leave-lobby-btn" class="btn-text-only">Sair</button>
      </div>

      <div class="players-section">
        <h3 class="section-title">Jogadores (<span id="player-count">0</span>)</h3>
        <div id="players-list" class="players-list"></div>
      </div>

      <div id="host-controls" class="host-controls" style="display: none;">
        <h3 class="section-title">Configura√ß√£o de Pap√©is</h3>
        <div class="card">
          <div class="role-config">
            <div class="role-item">
              <label>üî™ Assassinos</label>
              <input type="number" id="assassino-count" min="1" max="3" value="1">
            </div>
            <div class="role-item">
              <label>üîç Detetives</label>
              <input type="number" id="detetive-count" min="0" max="2" value="1">
            </div>
            <div class="role-item">
              <label>üòá Anjos</label>
              <input type="number" id="anjo-count" min="0" max="2" value="1">
            </div>
            <div class="role-info">
              <span>Cidad√£os: <strong id="cidadao-count">0</strong></span>
            </div>
          </div>
        </div>

        <button id="start-game-btn" class="btn btn-primary btn-large">Iniciar Jogo</button>
      </div>

      <div id="waiting-host" style="display: none;">
        <p class="waiting-message">Aguardando o host iniciar o jogo...</p>
      </div>
    </div>
  </div>

  <!-- Tela de Revela√ß√£o do Papel -->
  <div id="role-screen" class="screen">
    <div class="container role-reveal-container">
      <div class="role-card" id="role-card">
        <div class="role-icon" id="role-icon"></div>
        <h2 class="role-name" id="role-name"></h2>
        <p class="role-description" id="role-description"></p>
        <button id="role-understood-btn" class="btn btn-primary">Entendi</button>
      </div>
    </div>
  </div>

  <!-- Tela do Jogo -->
  <div id="game-screen" class="screen">
    <div class="game-header">
      <div class="phase-indicator" id="phase-indicator">
        <span class="phase-icon" id="phase-icon">üåô</span>
        <span class="phase-text" id="phase-text">Noite 1</span>
      </div>
      <div class="alive-count" id="alive-count">8 vivos</div>
    </div>

    <!-- A√ß√µes Noturnas -->
    <div id="night-action-panel" class="action-panel" style="display: none;">
      <div class="container">
        <h3 class="action-title" id="action-title">Escolha sua a√ß√£o</h3>
        <p class="action-subtitle" id="action-subtitle"></p>
        
        <div id="target-list" class="target-list"></div>
        
        <div id="action-confirmed" class="action-confirmed" style="display: none;">
          <div class="check-icon">‚úì</div>
          <p>A√ß√£o confirmada</p>
        </div>
      </div>
    </div>

    <!-- Fase do Dia / Chat -->
    <div id="day-panel" class="day-panel" style="display: none;">
      <div class="container">
        <div id="night-result" class="night-result"></div>
        
        <div class="chat-container">
          <div id="chat-messages" class="chat-messages"></div>
          
          <div class="chat-input-container">
            <input type="text" id="chat-input" placeholder="Digite sua mensagem..." maxlength="200" autocomplete="off">
            <button id="send-message-btn" class="btn-icon-only">üì§</button>
          </div>
        </div>

        <button id="start-voting-btn" class="btn btn-primary btn-large" style="display: none;">
          Iniciar Vota√ß√£o
        </button>
      </div>
    </div>

    <!-- Vota√ß√£o -->
    <div id="voting-panel" class="action-panel" style="display: none;">
      <div class="container">
        <h3 class="action-title">Vota√ß√£o</h3>
        <p class="action-subtitle">Escolha quem deve ser eliminado</p>
        
        <div id="vote-progress" class="vote-progress">
          <span id="votes-count">0</span>/<span id="votes-total">0</span> votos
        </div>
        
        <div id="vote-list" class="target-list"></div>
        
        <div id="vote-confirmed" class="action-confirmed" style="display: none;">
          <div class="check-icon">‚úì</div>
          <p>Voto confirmado</p>
        </div>
      </div>
    </div>

    <!-- Espectador (Jogador Morto) -->
    <div id="spectator-panel" class="spectator-panel" style="display: none;">
      <div class="container">
        <div class="spectator-message">
          <h3>‚ò†Ô∏è Voc√™ foi eliminado</h3>
          <p>Continue assistindo o jogo at√© o final</p>
          <div class="your-role">
            <span>Seu papel era:</span>
            <strong id="dead-role"></strong>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela de Fim de Jogo -->
  <div id="game-over-screen" class="screen">
    <div class="container">
      <div class="game-over-card">
        <div class="winner-badge" id="winner-badge"></div>
        <h2 id="winner-title" class="winner-title"></h2>
        <p id="winner-message" class="winner-message"></p>
        
        <div class="final-players">
          <h3>Revela√ß√£o dos Pap√©is</h3>
          <div id="final-players-list" class="final-players-list"></div>
        </div>

        <button id="back-to-home-btn" class="btn btn-primary btn-large">Nova Partida</button>
      </div>
    </div>
  </div>

  <!-- Modal de Investiga√ß√£o -->
  <div id="investigation-modal" class="modal">
    <div class="modal-content">
      <h3>Resultado da Investiga√ß√£o</h3>
      <p id="investigation-result"></p>
      <button id="close-investigation-btn" class="btn btn-secondary">OK</button>
    </div>
  </div>

  <!-- Toast de Notifica√ß√£o -->
  <div id="toast" class="toast"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js"></script>
</body>
</html>
